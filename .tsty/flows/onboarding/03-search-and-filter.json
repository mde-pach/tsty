{
  "name": "Onboarding: Search and Filter",
  "description": "Test the search bar and filter controls on the Tests page. Search for flows, change sort order, and switch view modes.",
  "baseUrl": "http://localhost:4000",
  "failFast": true,
  "steps": [
    {
      "name": "Load root page",
      "url": "/",
      "capture": { "screenshot": true },
      "primitives": [
        { "type": "waitForLoadState", "options": { "state": "networkidle" } }
      ]
    },
    {
      "name": "Search for a flow",
      "capture": { "screenshot": true },
      "primitives": [
        { "type": "fill", "selector": "input[placeholder*='Search flows']", "value": "Discover" }
      ],
      "assertions": [
        { "type": "visible", "selector": "text=Discover Root Page" }
      ]
    },
    {
      "name": "Clear search and verify all flows shown",
      "capture": { "screenshot": true },
      "primitives": [
        { "type": "fill", "selector": "input[placeholder*='Search flows']", "value": "" }
      ]
    },
    {
      "name": "Switch to list view",
      "capture": { "screenshot": true },
      "primitives": [
        { "type": "click", "selector": "button[title='List view']" }
      ]
    },
    {
      "name": "Switch back to grid view",
      "capture": { "screenshot": true },
      "primitives": [
        { "type": "click", "selector": "button[title='Grid view']" }
      ]
    },
    {
      "name": "Change sort to alphabetical",
      "capture": { "screenshot": true },
      "primitives": [
        { "type": "selectOption", "selector": "select:has(option[value='recent'])", "values": ["alphabetical"] }
      ]
    }
  ]
}
